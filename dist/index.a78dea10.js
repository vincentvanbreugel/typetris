function e(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},r={},i=n.parcelRequire477f;null==i&&((i=function(e){if(e in o)return o[e].exports;if(e in r){var t=r[e];delete r[e];var n={id:e,exports:{}};return o[e]=n,t.call(n.exports,n,n.exports),n.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},n.parcelRequire477f=i),i.register("27Lyk",(function(t,n){var o,r;e(t.exports,"register",(()=>o),(e=>o=e)),e(t.exports,"resolve",(()=>r),(e=>r=e));var i={};o=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)i[t[n]]=e[t[n]]},r=function(e){var t=i[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),i.register("7pWKZ",(function(e,t){i("hPtJY");Object.defineProperty(e.exports,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(e.exports,{dim:()=>s,default:()=>d});const n=o(i("lrcwG"));function o(e){return e&&e.__esModule?e:{default:e}}let r=new Set;function a(e,t,n){n&&r.has(n)||(n&&r.add(n),console.warn(""),t.forEach((t=>console.warn(e,"-",t))))}function s(e){return n.default.dim(e)}const d={info(e,t){a(n.default.bold(n.default.cyan("info")),...Array.isArray(e)?[e]:[t,e])},warn(e,t){a(n.default.bold(n.default.yellow("warn")),...Array.isArray(e)?[e]:[t,e])},risk(e,t){a(n.default.bold(n.default.magenta("risk")),...Array.isArray(e)?[e]:[t,e])}}})),i.register("hPtJY",(function(e,t){var n,o,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(e){o=a}}();var d,l=[],c=!1,u=-1;function p(){c&&d&&(c=!1,d.length?l=d.concat(l):u=-1,l.length&&_())}function _(){if(!c){var e=s(p);c=!0;for(var t=l.length;t;){for(d=l,l=[];++u<t;)d&&d[u].run();u=-1,t=l.length}d=null,c=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function h(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new f(e,t)),1!==l.length||c||s(_)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=h,r.addListener=h,r.once=h,r.off=h,r.removeListener=h,r.removeAllListeners=h,r.emit=h,r.prependListener=h,r.prependOnceListener=h,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}})),i.register("lrcwG",(function(e,t){var n=String,o=function(){return{isColorSupported:!1,reset:n,bold:n,dim:n,italic:n,underline:n,inverse:n,hidden:n,strikethrough:n,black:n,red:n,green:n,yellow:n,blue:n,magenta:n,cyan:n,white:n,gray:n,bgBlack:n,bgRed:n,bgGreen:n,bgYellow:n,bgBlue:n,bgMagenta:n,bgCyan:n,bgWhite:n}};e.exports=o(),e.exports.createColors=o})),i("27Lyk").register(JSON.parse('{"aT88m":"index.a78dea10.js","irUyb":"tetris-theme.647dafc2.mp3","eZkMa":"rotate.394cd925.mp3","fhciA":"move.423c9c2a.mp3","hlDNR":"lock.2c1b17d6.mp3","dcee0":"hard-drop.a20f3673.mp3","eYHbW":"game-over.1171e5ee.mp3","iKhnu":"line-clear.252896b1.mp3","cVuQj":"dark-optimism.ed438232.mp3"}'));const a={x:4,y:0},s={NO_CHANGE:{y:0,x:0},LEFT:{y:0,x:-1},DOWN:{y:1,x:0},RIGHT:{y:0,x:1}},d={LEFT:"ArrowLeft",DOWN:"ArrowDown",RIGHT:"ArrowRight",ROTATE_CLOCKWISE:"d",ROTATE_COUNTER_CLOCKWISE:"s",HARD_DROP:"ArrowUp",PAUSE:"Enter"},l=[40,100,300,1200],c=e=>e/60*1e3,u=[c(53),c(49),c(45),c(41),c(37),c(33),c(28),c(22),c(17),c(11),c(10),c(9),c(8),c(7),c(6),c(6),c(5),c(5),c(4),c(4),c(3)];var p,_={};Object.defineProperty(_,"__esModule",{value:!0}),Object.defineProperty(_,"default",{enumerable:!0,get:()=>v});const f=h(i("7pWKZ"));function h(e){return e&&e.__esModule?e:{default:e}}function m({version:e,from:t,to:n}){f.default.warn(`${t}-color-renamed`,[`As of Tailwind CSS ${e}, \`${t}\` has been renamed to \`${n}\`.`,"Update your configuration file to silence this warning."])}const v={inherit:"inherit",current:"currentColor",transparent:"transparent",black:"#000",white:"#fff",slate:{50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",300:"#cbd5e1",400:"#94a3b8",500:"#64748b",600:"#475569",700:"#334155",800:"#1e293b",900:"#0f172a"},gray:{50:"#f9fafb",100:"#f3f4f6",200:"#e5e7eb",300:"#d1d5db",400:"#9ca3af",500:"#6b7280",600:"#4b5563",700:"#374151",800:"#1f2937",900:"#111827"},zinc:{50:"#fafafa",100:"#f4f4f5",200:"#e4e4e7",300:"#d4d4d8",400:"#a1a1aa",500:"#71717a",600:"#52525b",700:"#3f3f46",800:"#27272a",900:"#18181b"},neutral:{50:"#fafafa",100:"#f5f5f5",200:"#e5e5e5",300:"#d4d4d4",400:"#a3a3a3",500:"#737373",600:"#525252",700:"#404040",800:"#262626",900:"#171717"},stone:{50:"#fafaf9",100:"#f5f5f4",200:"#e7e5e4",300:"#d6d3d1",400:"#a8a29e",500:"#78716c",600:"#57534e",700:"#44403c",800:"#292524",900:"#1c1917"},red:{50:"#fef2f2",100:"#fee2e2",200:"#fecaca",300:"#fca5a5",400:"#f87171",500:"#ef4444",600:"#dc2626",700:"#b91c1c",800:"#991b1b",900:"#7f1d1d"},orange:{50:"#fff7ed",100:"#ffedd5",200:"#fed7aa",300:"#fdba74",400:"#fb923c",500:"#f97316",600:"#ea580c",700:"#c2410c",800:"#9a3412",900:"#7c2d12"},amber:{50:"#fffbeb",100:"#fef3c7",200:"#fde68a",300:"#fcd34d",400:"#fbbf24",500:"#f59e0b",600:"#d97706",700:"#b45309",800:"#92400e",900:"#78350f"},yellow:{50:"#fefce8",100:"#fef9c3",200:"#fef08a",300:"#fde047",400:"#facc15",500:"#eab308",600:"#ca8a04",700:"#a16207",800:"#854d0e",900:"#713f12"},lime:{50:"#f7fee7",100:"#ecfccb",200:"#d9f99d",300:"#bef264",400:"#a3e635",500:"#84cc16",600:"#65a30d",700:"#4d7c0f",800:"#3f6212",900:"#365314"},green:{50:"#f0fdf4",100:"#dcfce7",200:"#bbf7d0",300:"#86efac",400:"#4ade80",500:"#22c55e",600:"#16a34a",700:"#15803d",800:"#166534",900:"#14532d"},emerald:{50:"#ecfdf5",100:"#d1fae5",200:"#a7f3d0",300:"#6ee7b7",400:"#34d399",500:"#10b981",600:"#059669",700:"#047857",800:"#065f46",900:"#064e3b"},teal:{50:"#f0fdfa",100:"#ccfbf1",200:"#99f6e4",300:"#5eead4",400:"#2dd4bf",500:"#14b8a6",600:"#0d9488",700:"#0f766e",800:"#115e59",900:"#134e4a"},cyan:{50:"#ecfeff",100:"#cffafe",200:"#a5f3fc",300:"#67e8f9",400:"#22d3ee",500:"#06b6d4",600:"#0891b2",700:"#0e7490",800:"#155e75",900:"#164e63"},sky:{50:"#f0f9ff",100:"#e0f2fe",200:"#bae6fd",300:"#7dd3fc",400:"#38bdf8",500:"#0ea5e9",600:"#0284c7",700:"#0369a1",800:"#075985",900:"#0c4a6e"},blue:{50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a"},indigo:{50:"#eef2ff",100:"#e0e7ff",200:"#c7d2fe",300:"#a5b4fc",400:"#818cf8",500:"#6366f1",600:"#4f46e5",700:"#4338ca",800:"#3730a3",900:"#312e81"},violet:{50:"#f5f3ff",100:"#ede9fe",200:"#ddd6fe",300:"#c4b5fd",400:"#a78bfa",500:"#8b5cf6",600:"#7c3aed",700:"#6d28d9",800:"#5b21b6",900:"#4c1d95"},purple:{50:"#faf5ff",100:"#f3e8ff",200:"#e9d5ff",300:"#d8b4fe",400:"#c084fc",500:"#a855f7",600:"#9333ea",700:"#7e22ce",800:"#6b21a8",900:"#581c87"},fuchsia:{50:"#fdf4ff",100:"#fae8ff",200:"#f5d0fe",300:"#f0abfc",400:"#e879f9",500:"#d946ef",600:"#c026d3",700:"#a21caf",800:"#86198f",900:"#701a75"},pink:{50:"#fdf2f8",100:"#fce7f3",200:"#fbcfe8",300:"#f9a8d4",400:"#f472b6",500:"#ec4899",600:"#db2777",700:"#be185d",800:"#9d174d",900:"#831843"},rose:{50:"#fff1f2",100:"#ffe4e6",200:"#fecdd3",300:"#fda4af",400:"#fb7185",500:"#f43f5e",600:"#e11d48",700:"#be123c",800:"#9f1239",900:"#881337"},get lightBlue(){return m({version:"v2.2",from:"lightBlue",to:"sky"}),this.sky},get warmGray(){return m({version:"v3.0",from:"warmGray",to:"stone"}),this.stone},get trueGray(){return m({version:"v3.0",from:"trueGray",to:"neutral"}),this.neutral},get coolGray(){return m({version:"v3.0",from:"coolGray",to:"gray"}),this.gray},get blueGray(){return m({version:"v3.0",from:"blueGray",to:"slate"}),this.slate}},g={gray:{lighter:t(p=(_.__esModule?_:{default:_}).default).gray[100],light:t(p).gray[400],neutral:t(p).gray[500],dark:t(p).gray[600],darker:t(p).gray[900]},red:{lighter:t(p).red[100],light:t(p).red[400],neutral:t(p).red[500],dark:t(p).red[600],darker:t(p).red[900]},orange:{lighter:t(p).orange[100],light:t(p).orange[400],neutral:t(p).orange[500],dark:t(p).orange[600],darker:t(p).orange[900]},green:{lighter:t(p).green[100],light:t(p).green[400],neutral:t(p).green[500],dark:t(p).green[600],darker:t(p).green[900]},purple:{lighter:t(p).purple[100],light:t(p).purple[400],neutral:t(p).purple[500],dark:t(p).purple[600],darker:t(p).purple[900]},blue:{lighter:t(p).blue[100],light:t(p).blue[400],neutral:t(p).blue[500],dark:t(p).blue[600],darker:t(p).blue[900]},cyan:{lighter:t(p).cyan[100],light:t(p).cyan[300],neutral:t(p).cyan[400],dark:t(p).cyan[500],darker:t(p).cyan[900]},yellow:{lighter:t(p).yellow[100],light:t(p).yellow[300],neutral:t(p).yellow[400],dark:t(p).yellow[500],darker:t(p).yellow[900]}},y=["red","orange","green","purple","blue","cyan","yellow"],b=[{id:1,color:g.yellow,shapes:[[[1,1],[1,1]],[[1,1],[1,1]],[[1,1],[1,1]],[[1,1],[1,1]]]},{id:2,color:g.blue,shapes:[[[1,0,0],[1,1,1],[0,0,0]],[[0,1,1],[0,1,0],[0,1,0]],[[0,0,0],[1,1,1],[0,0,1]],[[0,1,0],[0,1,0],[1,1,0]]]},{id:3,color:g.orange,shapes:[[[0,0,1],[1,1,1],[0,0,0]],[[0,1,0],[0,1,0],[0,1,1]],[[0,0,0],[1,1,1],[1,0,0]],[[1,1,0],[0,1,0],[0,1,0]]]},{id:4,color:g.green,shapes:[[[0,1,1],[1,1,0],[0,0,0]],[[0,1,0],[0,1,1],[0,0,1]],[[0,0,0],[0,1,1],[1,1,0]],[[1,0,0],[1,1,0],[0,1,0]]]},{id:5,color:g.red,shapes:[[[1,1,0],[0,1,1],[0,0,0]],[[0,0,1],[0,1,1],[0,1,0]],[[0,0,0],[1,1,0],[0,1,1]],[[0,1,0],[1,1,0],[1,0,0]]]},{id:6,color:g.purple,shapes:[[[0,1,0],[1,1,1],[0,0,0]],[[0,1,0],[0,1,1],[0,1,0]],[[0,0,0],[1,1,1],[0,1,0]],[[0,1,0],[1,1,0],[0,1,0]]]},{id:7,color:g.cyan,shapes:[[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]],[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]],[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]]]}];class A{static sleep(e){return new Promise((t=>setTimeout(t,e)))}static drawMino(e,t,n,o){const r=2/33,i=2*r,a=2*r,s=2*a;n.fillStyle=o.dark,n.fillRect(e,t,1,1),n.fillStyle=o.light,n.fillRect(e+r,t+r,1-a,1-a),n.fillStyle=o.neutral,n.fillRect(e+i,t+i,1-s,1-s)}}class x{animatedLines=[];animationTimer={start:0,elapsed:0};constructor(e){this.canvas=document.getElementById(e),this.context=this.canvas.getContext("2d"),this.state=Array.from(Array(20),(()=>Array(10).fill(0))),this.create()}draw(){this.context.clearRect(0,0,this.context.canvas.width,this.context.canvas.height),this.context.fillStyle=g.gray.darker,this.context.fillRect(0,0,this.context.canvas.width,this.context.canvas.height);for(let e=0;e<this.state.length;e++)for(let t=0;t<this.state[0].length;t++){const n=b.find((n=>n.id===this.state[e][t]));n&&A.drawMino(t,e,this.context,n.color)}}async handleClearLines(e){this.animatedLines=e,this.animateClearedLines(),await A.sleep(400),cancelAnimationFrame(this.lineClearAnimationId),this.animatedLines=[],this.clearLines(e)}async handleGameOver(){this.animateGameOver(),await A.sleep(1e3),cancelAnimationFrame(this.gameOverAnimationId)}getLinesCleared(){return this.state.reduce(((e,t,n)=>(t.every((e=>0!==e))&&e.push(n),e)),[])||[]}clearLines(e){e.forEach((e=>{const t=JSON.parse(JSON.stringify(this.state));this.state.forEach(((n,o)=>{if(0===o)for(let e=0;e<n.length;e++)n[e]=0;if(o>0&&o<=e)for(let e=0;e<n.length;e++)n[e]=t[o-1][e]}))}))}animateClearedLines(e=0){this.context.fillStyle=g.gray.darker,this.animationTimer.elapsed=e-this.animationTimer.start,this.animationTimer.elapsed>=80&&(this.animationTimer.start=e,this.animatedLines.forEach((e=>{const t=this.state[e].indexOf(0),n=-1!==t?t-1:4,o=this.state[e].lastIndexOf(0),r=-1!==o?o+1:5;this.context.clearRect(n,e,1,1),this.context.clearRect(r,e,1,1),this.context.fillRect(n,e,1,1),this.context.fillRect(r,e,1,1),this.state[e][n]=0,this.state[e][r]=0}))),this.lineClearAnimationId=requestAnimationFrame(this.animateClearedLines.bind(this))}animateGameOver(e=0,t=0){if(this.state[t]){if(this.animationTimer.elapsed=e-this.animationTimer.start,this.animationTimer.elapsed>=30){this.animationTimer.start=e;for(let e=0;e<this.state[t].length;e++){const n=y[Math.floor(Math.random()*y.length)];A.drawMino(e,t,this.context,g[n])}t++}this.gameOverAnimationId=requestAnimationFrame((e=>{this.animateGameOver(e,t)}))}}create(){this.context.canvas.width=330,this.context.canvas.height=660,this.context.scale(33,33)}}class w{isLocked=!1;constructor(e,t){this.id=e.id,this.anchorPoint=a,this.piecePosition=[],this.shapes=e.shapes,this.color=e.color,this.shapeIndex=0,this.board=t}move(e){this.clearPiecePosition(),this.updateBoardPosition({direction:e,value:this.id}),this.isLocked=this.isPieceLocked()}rotate(e){"clockwise"===e?this.incrementShapeIndex():this.decrementShapeIndex(),this.move(s.NO_CHANGE)}hardDrop(){let e=0;for(;this.isMoveValid({direction:s.DOWN});)this.move(s.DOWN),e++;return e}isPieceLocked(){const e={direction:s.DOWN,piecePosition:this.getCopyPiecePosition()};return!this.isAboveFloor(e)||!this.isAboveOtherPieces(e)}isMoveValid(e){const{direction:t,rotation:n}=e,o=[];let r=this.shapeIndex;n&&("clockwise"===n?3!==this.shapeIndex?r++:r=0:0!==this.shapeIndex?r--:r=3),this.shapes[r].forEach(((e,t)=>{e.forEach(((e,n)=>{1===e&&o.push({x:this.anchorPoint.x+n,y:this.anchorPoint.y+t})}))}));const i={...t&&{direction:t},piecePosition:o};return!(!this.isBetweenWalls(i)||!this.isBetweenOtherPieces(i))&&!(!this.isAboveFloor(i)||!this.isAboveOtherPieces(i))}updatePiecePosition(){this.piecePosition=[],this.shapes[this.shapeIndex].forEach(((e,t)=>{e.forEach(((e,n)=>{1===e&&this.piecePosition.push({x:this.anchorPoint.x+n,y:this.anchorPoint.y+t})}))}))}updateBoardPosition({direction:e=s.NO_CHANGE,value:t=0}){this.anchorPoint={x:this.anchorPoint.x+e.x,y:this.anchorPoint.y+e.y},this.updatePiecePosition(),this.piecePosition.forEach((e=>{this.board.state[e.y][e.x]=t}))}incrementShapeIndex(){3!==this.shapeIndex?this.shapeIndex++:this.shapeIndex=0}decrementShapeIndex(){0!==this.shapeIndex?this.shapeIndex--:this.shapeIndex=3}isBetweenOtherPieces(e){const{direction:t,piecePosition:n}=e;return n.every((e=>{const n=t?e.x+t.x:e.x;return 0===this.board.state[e.y][n]||this.piecePosition.find((t=>t.x===n&&t.y===e.y))}))}isBetweenWalls(e){const{direction:t,piecePosition:n}=e;return n.every((e=>{const n=t?e.x+t.x:e.x;return n>=0&&n<10}))}isAboveOtherPieces(e){const{direction:t,piecePosition:n}=e;return n.every((e=>{const n=t?e.y+t.y:e.y;return 0===this.board.state[n][e.x]||this.piecePosition.find((t=>t.x===e.x&&t.y===n))}))}isAboveFloor(e){const{direction:t,piecePosition:n}=e;return n.every((e=>(t?e.y+t.y:e.y)<20))}clearPiecePosition(){this.piecePosition.forEach((e=>{this.board.state[e.y][e.x]=0}))}getCopyPiecePosition(){return Object.assign([],this.piecePosition)}}var T;
/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
!function(){var e=function(){this.init()};e.prototype={init:function(){var e=this||t;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var n=this||t;if(e=parseFloat(e),n.ctx||c(),void 0!==e&&e>=0&&e<=1){if(n._volume=e,n._muted)return n;n.usingWebAudio&&n.masterGain.gain.setValueAtTime(e,t.ctx.currentTime);for(var o=0;o<n._howls.length;o++)if(!n._howls[o]._webAudio)for(var r=n._howls[o]._getSoundIds(),i=0;i<r.length;i++){var a=n._howls[o]._soundById(r[i]);a&&a._node&&(a._node.volume=a._volume*e)}return n}return n._volume},mute:function(e){var n=this||t;n.ctx||c(),n._muted=e,n.usingWebAudio&&n.masterGain.gain.setValueAtTime(e?0:n._volume,t.ctx.currentTime);for(var o=0;o<n._howls.length;o++)if(!n._howls[o]._webAudio)for(var r=n._howls[o]._getSoundIds(),i=0;i<r.length;i++){var a=n._howls[o]._soundById(r[i]);a&&a._node&&(a._node.muted=!!e||a._muted)}return n},stop:function(){for(var e=this||t,n=0;n<e._howls.length;n++)e._howls[n].stop();return e},unload:function(){for(var e=this||t,n=e._howls.length-1;n>=0;n--)e._howls[n].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,c()),e},codecs:function(e){return(this||t)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||t;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||t,n=null;try{n="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!n||"function"!=typeof n.canPlayType)return e;var o=n.canPlayType("audio/mpeg;").replace(/^no$/,""),r=e._navigator?e._navigator.userAgent:"",i=r.match(/OPR\/([0-6].)/g),a=i&&parseInt(i[0].split("/")[1],10)<33,s=-1!==r.indexOf("Safari")&&-1===r.indexOf("Chrome"),d=r.match(/Version\/(.*?) /),l=s&&d&&parseInt(d[1],10)<15;return e._codecs={mp3:!(a||!o&&!n.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!o,opus:!!n.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(n.canPlayType('audio/wav; codecs="1"')||n.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!n.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!n.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(n.canPlayType("audio/x-m4a;")||n.canPlayType("audio/m4a;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(n.canPlayType("audio/x-m4b;")||n.canPlayType("audio/m4b;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(n.canPlayType("audio/x-mp4;")||n.canPlayType("audio/mp4;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(l||!n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(l||!n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!n.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(n.canPlayType("audio/x-flac;")||n.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||t;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var n=function(t){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var o=new Audio;o._unlocked=!0,e._releaseHtml5Audio(o)}catch(t){e.noAudio=!0;break}for(var r=0;r<e._howls.length;r++)if(!e._howls[r]._webAudio)for(var i=e._howls[r]._getSoundIds(),a=0;a<i.length;a++){var s=e._howls[r]._soundById(i[a]);s&&s._node&&!s._node._unlocked&&(s._node._unlocked=!0,s._node.load())}e._autoResume();var d=e.ctx.createBufferSource();d.buffer=e._scratchBuffer,d.connect(e.ctx.destination),void 0===d.start?d.noteOn(0):d.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),d.onended=function(){d.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",n,!0),document.removeEventListener("touchend",n,!0),document.removeEventListener("click",n,!0),document.removeEventListener("keydown",n,!0);for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("unlock")}};return document.addEventListener("touchstart",n,!0),document.addEventListener("touchend",n,!0),document.addEventListener("click",n,!0),document.addEventListener("keydown",n,!0),e}},_obtainHtml5Audio:function(){var e=this||t;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var n=(new Audio).play();return n&&"undefined"!=typeof Promise&&(n instanceof Promise||"function"==typeof n.then)&&n.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(e){var n=this||t;return e._unlocked&&n._html5AudioPool.push(e),n},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&t.usingWebAudio){for(var n=0;n<e._howls.length;n++)if(e._howls[n]._webAudio)for(var o=0;o<e._howls[n]._sounds.length;o++)if(!e._howls[n]._sounds[o]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout((function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var t=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(t,t)}}),3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&t.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then((function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")})),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var t=new e,o=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};o.prototype={init:function(e){var n=this;return t.ctx||c(),n._autoplay=e.autoplay||!1,n._format="string"!=typeof e.format?e.format:[e.format],n._html5=e.html5||!1,n._muted=e.mute||!1,n._loop=e.loop||!1,n._pool=e.pool||5,n._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,n._rate=e.rate||1,n._sprite=e.sprite||{},n._src="string"!=typeof e.src?e.src:[e.src],n._volume=void 0!==e.volume?e.volume:1,n._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},n._duration=0,n._state="unloaded",n._sounds=[],n._endTimers={},n._queue=[],n._playLock=!1,n._onend=e.onend?[{fn:e.onend}]:[],n._onfade=e.onfade?[{fn:e.onfade}]:[],n._onload=e.onload?[{fn:e.onload}]:[],n._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],n._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],n._onpause=e.onpause?[{fn:e.onpause}]:[],n._onplay=e.onplay?[{fn:e.onplay}]:[],n._onstop=e.onstop?[{fn:e.onstop}]:[],n._onmute=e.onmute?[{fn:e.onmute}]:[],n._onvolume=e.onvolume?[{fn:e.onvolume}]:[],n._onrate=e.onrate?[{fn:e.onrate}]:[],n._onseek=e.onseek?[{fn:e.onseek}]:[],n._onunlock=e.onunlock?[{fn:e.onunlock}]:[],n._onresume=[],n._webAudio=t.usingWebAudio&&!n._html5,void 0!==t.ctx&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(n),n._autoplay&&n._queue.push({event:"play",action:function(){n.play()}}),n._preload&&"none"!==n._preload&&n.load(),n},load:function(){var e=this,n=null;if(t.noAudio)e._emit("loaderror",null,"No audio support.");else{"string"==typeof e._src&&(e._src=[e._src]);for(var o=0;o<e._src.length;o++){var i,s;if(e._format&&e._format[o])i=e._format[o];else{if("string"!=typeof(s=e._src[o])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(i=/^data:audio\/([^;,]+);/i.exec(s))||(i=/\.([^.]+)$/.exec(s.split("?",1)[0])),i&&(i=i[1].toLowerCase())}if(i||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),i&&t.codecs(i)){n=e._src[o];break}}if(n)return e._src=n,e._state="loading","https:"===window.location.protocol&&"http:"===n.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new r(e),e._webAudio&&a(e),e;e._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,n){var o=this,r=null;if("number"==typeof e)r=e,e=null;else{if("string"==typeof e&&"loaded"===o._state&&!o._sprite[e])return null;if(void 0===e&&(e="__default",!o._playLock)){for(var i=0,a=0;a<o._sounds.length;a++)o._sounds[a]._paused&&!o._sounds[a]._ended&&(i++,r=o._sounds[a]._id);1===i?e=null:r=null}}var s=r?o._soundById(r):o._inactiveSound();if(!s)return null;if(r&&!e&&(e=s._sprite||"__default"),"loaded"!==o._state){s._sprite=e,s._ended=!1;var d=s._id;return o._queue.push({event:"play",action:function(){o.play(d)}}),d}if(r&&!s._paused)return n||o._loadQueue("play"),s._id;o._webAudio&&t._autoResume();var l=Math.max(0,s._seek>0?s._seek:o._sprite[e][0]/1e3),c=Math.max(0,(o._sprite[e][0]+o._sprite[e][1])/1e3-l),u=1e3*c/Math.abs(s._rate),p=o._sprite[e][0]/1e3,_=(o._sprite[e][0]+o._sprite[e][1])/1e3;s._sprite=e,s._ended=!1;var f=function(){s._paused=!1,s._seek=l,s._start=p,s._stop=_,s._loop=!(!s._loop&&!o._sprite[e][2])};if(!(l>=_)){var h=s._node;if(o._webAudio){var m=function(){o._playLock=!1,f(),o._refreshBuffer(s);var e=s._muted||o._muted?0:s._volume;h.gain.setValueAtTime(e,t.ctx.currentTime),s._playStart=t.ctx.currentTime,void 0===h.bufferSource.start?s._loop?h.bufferSource.noteGrainOn(0,l,86400):h.bufferSource.noteGrainOn(0,l,c):s._loop?h.bufferSource.start(0,l,86400):h.bufferSource.start(0,l,c),u!==1/0&&(o._endTimers[s._id]=setTimeout(o._ended.bind(o,s),u)),n||setTimeout((function(){o._emit("play",s._id),o._loadQueue()}),0)};"running"===t.state&&"interrupted"!==t.ctx.state?m():(o._playLock=!0,o.once("resume",m),o._clearTimer(s._id))}else{var v=function(){h.currentTime=l,h.muted=s._muted||o._muted||t._muted||h.muted,h.volume=s._volume*t.volume(),h.playbackRate=s._rate;try{var r=h.play();if(r&&"undefined"!=typeof Promise&&(r instanceof Promise||"function"==typeof r.then)?(o._playLock=!0,f(),r.then((function(){o._playLock=!1,h._unlocked=!0,n?o._loadQueue():o._emit("play",s._id)})).catch((function(){o._playLock=!1,o._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),s._ended=!0,s._paused=!0}))):n||(o._playLock=!1,f(),o._emit("play",s._id)),h.playbackRate=s._rate,h.paused)return void o._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||s._loop?o._endTimers[s._id]=setTimeout(o._ended.bind(o,s),u):(o._endTimers[s._id]=function(){o._ended(s),h.removeEventListener("ended",o._endTimers[s._id],!1)},h.addEventListener("ended",o._endTimers[s._id],!1))}catch(e){o._emit("playerror",s._id,e)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===h.src&&(h.src=o._src,h.load());var g=window&&window.ejecta||!h.readyState&&t._navigator.isCocoonJS;if(h.readyState>=3||g)v();else{o._playLock=!0,o._state="loading";var y=function(){o._state="loaded",v(),h.removeEventListener(t._canPlayEvent,y,!1)};h.addEventListener(t._canPlayEvent,y,!1),o._clearTimer(s._id)}}return s._id}o._ended(s)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),o=0;o<n.length;o++){t._clearTimer(n[o]);var r=t._soundById(n[o]);if(r&&!r._paused&&(r._seek=t.seek(n[o]),r._rateSeek=0,r._paused=!0,t._stopFade(n[o]),r._node))if(t._webAudio){if(!r._node.bufferSource)continue;void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),t._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||t._emit("pause",r?r._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var o=n._getSoundIds(e),r=0;r<o.length;r++){n._clearTimer(o[r]);var i=n._soundById(o[r]);i&&(i._seek=i._start||0,i._rateSeek=0,i._paused=!0,i._ended=!0,n._stopFade(o[r]),i._node&&(n._webAudio?i._node.bufferSource&&(void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),n._cleanBuffer(i._node)):isNaN(i._node.duration)&&i._node.duration!==1/0||(i._node.currentTime=i._start||0,i._node.pause(),i._node.duration===1/0&&n._clearSound(i._node))),t||n._emit("stop",i._id))}return n},mute:function(e,n){var o=this;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"mute",action:function(){o.mute(e,n)}}),o;if(void 0===n){if("boolean"!=typeof e)return o._muted;o._muted=e}for(var r=o._getSoundIds(n),i=0;i<r.length;i++){var a=o._soundById(r[i]);a&&(a._muted=e,a._interval&&o._stopFade(a._id),o._webAudio&&a._node?a._node.gain.setValueAtTime(e?0:a._volume,t.ctx.currentTime):a._node&&(a._node.muted=!!t._muted||e),o._emit("mute",a._id))}return o},volume:function(){var e,n,o,r=this,i=arguments;if(0===i.length)return r._volume;if(1===i.length||2===i.length&&void 0===i[1]){var a=r._getSoundIds(),s=a.indexOf(i[0]);s>=0?n=parseInt(i[0],10):e=parseFloat(i[0])}else i.length>=2&&(e=parseFloat(i[0]),n=parseInt(i[1],10));if(!(void 0!==e&&e>=0&&e<=1))return(o=n?r._soundById(n):r._sounds[0])?o._volume:0;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,i)}}),r;void 0===n&&(r._volume=e),n=r._getSoundIds(n);for(var d=0;d<n.length;d++)(o=r._soundById(n[d]))&&(o._volume=e,i[2]||r._stopFade(n[d]),r._webAudio&&o._node&&!o._muted?o._node.gain.setValueAtTime(e,t.ctx.currentTime):o._node&&!o._muted&&(o._node.volume=e*t.volume()),r._emit("volume",o._id));return r},fade:function(e,n,o,r){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"fade",action:function(){i.fade(e,n,o,r)}}),i;e=Math.min(Math.max(0,parseFloat(e)),1),n=Math.min(Math.max(0,parseFloat(n)),1),o=parseFloat(o),i.volume(e,r);for(var a=i._getSoundIds(r),s=0;s<a.length;s++){var d=i._soundById(a[s]);if(d){if(r||i._stopFade(a[s]),i._webAudio&&!d._muted){var l=t.ctx.currentTime,c=l+o/1e3;d._volume=e,d._node.gain.setValueAtTime(e,l),d._node.gain.linearRampToValueAtTime(n,c)}i._startFadeInterval(d,e,n,o,a[s],void 0===r)}}return i},_startFadeInterval:function(e,t,n,o,r,i){var a=this,s=t,d=n-t,l=Math.abs(d/.01),c=Math.max(4,l>0?o/l:o),u=Date.now();e._fadeTo=n,e._interval=setInterval((function(){var r=(Date.now()-u)/o;u=Date.now(),s+=d*r,s=Math.round(100*s)/100,s=d<0?Math.max(n,s):Math.min(n,s),a._webAudio?e._volume=s:a.volume(s,e._id,!0),i&&(a._volume=s),(n<t&&s<=n||n>t&&s>=n)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,a.volume(n,e._id),a._emit("fade",e._id))}),c)},_stopFade:function(e){var n=this,o=n._soundById(e);return o&&o._interval&&(n._webAudio&&o._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(o._interval),o._interval=null,n.volume(o._fadeTo,e),o._fadeTo=null,n._emit("fade",e)),n},loop:function(){var e,t,n,o=this,r=arguments;if(0===r.length)return o._loop;if(1===r.length){if("boolean"!=typeof r[0])return!!(n=o._soundById(parseInt(r[0],10)))&&n._loop;e=r[0],o._loop=e}else 2===r.length&&(e=r[0],t=parseInt(r[1],10));for(var i=o._getSoundIds(t),a=0;a<i.length;a++)(n=o._soundById(i[a]))&&(n._loop=e,o._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e,e&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop,o.playing(i[a])&&(o.pause(i[a],!0),o.play(i[a],!0)))));return o},rate:function(){var e,n,o,r=this,i=arguments;if(0===i.length)n=r._sounds[0]._id;else if(1===i.length){var a=r._getSoundIds(),s=a.indexOf(i[0]);s>=0?n=parseInt(i[0],10):e=parseFloat(i[0])}else 2===i.length&&(e=parseFloat(i[0]),n=parseInt(i[1],10));if("number"!=typeof e)return(o=r._soundById(n))?o._rate:r._rate;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,i)}}),r;void 0===n&&(r._rate=e),n=r._getSoundIds(n);for(var d=0;d<n.length;d++)if(o=r._soundById(n[d])){r.playing(n[d])&&(o._rateSeek=r.seek(n[d]),o._playStart=r._webAudio?t.ctx.currentTime:o._playStart),o._rate=e,r._webAudio&&o._node&&o._node.bufferSource?o._node.bufferSource.playbackRate.setValueAtTime(e,t.ctx.currentTime):o._node&&(o._node.playbackRate=e);var l=r.seek(n[d]),c=(r._sprite[o._sprite][0]+r._sprite[o._sprite][1])/1e3-l,u=1e3*c/Math.abs(o._rate);!r._endTimers[n[d]]&&o._paused||(r._clearTimer(n[d]),r._endTimers[n[d]]=setTimeout(r._ended.bind(r,o),u)),r._emit("rate",o._id)}return r},seek:function(){var e,n,o=this,r=arguments;if(0===r.length)o._sounds.length&&(n=o._sounds[0]._id);else if(1===r.length){var i=o._getSoundIds(),a=i.indexOf(r[0]);a>=0?n=parseInt(r[0],10):o._sounds.length&&(n=o._sounds[0]._id,e=parseFloat(r[0]))}else 2===r.length&&(e=parseFloat(r[0]),n=parseInt(r[1],10));if(void 0===n)return 0;if("number"==typeof e&&("loaded"!==o._state||o._playLock))return o._queue.push({event:"seek",action:function(){o.seek.apply(o,r)}}),o;var s=o._soundById(n);if(s){if(!("number"==typeof e&&e>=0)){if(o._webAudio){var d=o.playing(n)?t.ctx.currentTime-s._playStart:0,l=s._rateSeek?s._rateSeek-s._seek:0;return s._seek+(l+d*Math.abs(s._rate))}return s._node.currentTime}var c=o.playing(n);c&&o.pause(n,!0),s._seek=e,s._ended=!1,o._clearTimer(n),o._webAudio||!s._node||isNaN(s._node.duration)||(s._node.currentTime=e);var u=function(){c&&o.play(n,!0),o._emit("seek",n)};if(c&&!o._webAudio){var p=function(){o._playLock?setTimeout(p,0):u()};setTimeout(p,0)}else u()}return o},playing:function(e){var t=this;if("number"==typeof e){var n=t._soundById(e);return!!n&&!n._paused}for(var o=0;o<t._sounds.length;o++)if(!t._sounds[o]._paused)return!0;return!1},duration:function(e){var t=this,n=t._duration,o=t._soundById(e);return o&&(n=t._sprite[o._sprite][1]/1e3),n},state:function(){return this._state},unload:function(){for(var e=this,n=e._sounds,o=0;o<n.length;o++)n[o]._paused||e.stop(n[o]._id),e._webAudio||(e._clearSound(n[o]._node),n[o]._node.removeEventListener("error",n[o]._errorFn,!1),n[o]._node.removeEventListener(t._canPlayEvent,n[o]._loadFn,!1),n[o]._node.removeEventListener("ended",n[o]._endFn,!1),t._releaseHtml5Audio(n[o]._node)),delete n[o]._node,e._clearTimer(n[o]._id);var r=t._howls.indexOf(e);r>=0&&t._howls.splice(r,1);var a=!0;for(o=0;o<t._howls.length;o++)if(t._howls[o]._src===e._src||e._src.indexOf(t._howls[o]._src)>=0){a=!1;break}return i&&a&&delete i[e._src],t.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,o){var r=this["_on"+e];return"function"==typeof t&&r.push(o?{id:n,fn:t,once:o}:{id:n,fn:t}),this},off:function(e,t,n){var o=this,r=o["_on"+e],i=0;if("number"==typeof t&&(n=t,t=null),t||n)for(i=0;i<r.length;i++){var a=n===r[i].id;if(t===r[i].fn&&a||!t&&a){r.splice(i,1);break}}else if(e)o["_on"+e]=[];else{var s=Object.keys(o);for(i=0;i<s.length;i++)0===s[i].indexOf("_on")&&Array.isArray(o[s[i]])&&(o[s[i]]=[])}return o},once:function(e,t,n){return this.on(e,t,n,1),this},_emit:function(e,t,n){for(var o=this,r=o["_on"+e],i=r.length-1;i>=0;i--)r[i].id&&r[i].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,n)}.bind(o,r[i].fn),0),r[i].once&&o.off(e,r[i].fn,r[i].id));return o._loadQueue(e),o},_loadQueue:function(e){var t=this;if(t._queue.length>0){var n=t._queue[0];n.event===e&&(t._queue.shift(),t._loadQueue()),e||n.action()}return t},_ended:function(e){var n=this,o=e._sprite;if(!n._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(n._ended.bind(n,e),100),n;var r=!(!e._loop&&!n._sprite[o][2]);if(n._emit("end",e._id),!n._webAudio&&r&&n.stop(e._id,!0).play(e._id),n._webAudio&&r){n._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=t.ctx.currentTime;var i=1e3*(e._stop-e._start)/Math.abs(e._rate);n._endTimers[e._id]=setTimeout(n._ended.bind(n,e),i)}return n._webAudio&&!r&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,n._clearTimer(e._id),n._cleanBuffer(e._node),t._autoSuspend()),n._webAudio||r||n.stop(e._id,!0),n},_clearTimer:function(e){var t=this;if(t._endTimers[e]){if("function"!=typeof t._endTimers[e])clearTimeout(t._endTimers[e]);else{var n=t._soundById(e);n&&n._node&&n._node.removeEventListener("ended",t._endTimers[e],!1)}delete t._endTimers[e]}return t},_soundById:function(e){for(var t=this,n=0;n<t._sounds.length;n++)if(e===t._sounds[n]._id)return t._sounds[n];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new r(e)},_drain:function(){var e=this,t=e._pool,n=0,o=0;if(!(e._sounds.length<t)){for(o=0;o<e._sounds.length;o++)e._sounds[o]._ended&&n++;for(o=e._sounds.length-1;o>=0;o--){if(n<=t)return;e._sounds[o]._ended&&(e._webAudio&&e._sounds[o]._node&&e._sounds[o]._node.disconnect(0),e._sounds.splice(o,1),n--)}}},_getSoundIds:function(e){if(void 0===e){for(var t=[],n=0;n<this._sounds.length;n++)t.push(this._sounds[n]._id);return t}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=t.ctx.createBufferSource(),e._node.bufferSource.buffer=i[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,t.ctx.currentTime),this},_cleanBuffer:function(e){var n=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(t._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),n))try{e.bufferSource.buffer=t._scratchBuffer}catch(e){}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var r=function(e){this._parent=e,this.init()};r.prototype={init:function(){var e=this,n=e._parent;return e._muted=n._muted,e._loop=n._loop,e._volume=n._volume,e._rate=n._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++t._counter,n._sounds.push(e),e.create(),e},create:function(){var e=this,n=e._parent,o=t._muted||e._muted||e._parent._muted?0:e._volume;return n._webAudio?(e._node=void 0===t.ctx.createGain?t.ctx.createGainNode():t.ctx.createGain(),e._node.gain.setValueAtTime(o,t.ctx.currentTime),e._node.paused=!0,e._node.connect(t.masterGain)):t.noAudio||(e._node=t._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(t._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=n._src,e._node.preload=!0===n._preload?"auto":n._preload,e._node.volume=o*t.volume(),e._node.load()),e},reset:function(){var e=this,n=e._parent;return e._muted=n._muted,e._loop=n._loop,e._volume=n._volume,e._rate=n._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++t._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,n=e._parent;n._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(n._sprite).length&&(n._sprite={__default:[0,1e3*n._duration]}),"loaded"!==n._state&&(n._state="loaded",n._emit("load"),n._loadQueue()),e._node.removeEventListener(t._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,t=e._parent;t._duration===1/0&&(t._duration=Math.ceil(10*e._node.duration)/10,t._sprite.__default[1]===1/0&&(t._sprite.__default[1]=1e3*t._duration),t._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var i={},a=function(e){var t=e._src;if(i[t])return e._duration=i[t].duration,void l(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),o=new Uint8Array(n.length),r=0;r<n.length;++r)o[r]=n.charCodeAt(r);d(o.buffer,e)}else{var a=new XMLHttpRequest;a.open(e._xhr.method,t,!0),a.withCredentials=e._xhr.withCredentials,a.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach((function(t){a.setRequestHeader(t,e._xhr.headers[t])})),a.onload=function(){var t=(a.status+"")[0];"0"===t||"2"===t||"3"===t?d(a.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+a.status+".")},a.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete i[t],e.load())},s(a)}},s=function(e){try{e.send()}catch(t){e.onerror()}},d=function(e,n){var o=function(){n._emit("loaderror",null,"Decoding audio data failed.")},r=function(e){e&&n._sounds.length>0?(i[n._src]=e,l(n,e)):o()};"undefined"!=typeof Promise&&1===t.ctx.decodeAudioData.length?t.ctx.decodeAudioData(e).then(r).catch(o):t.ctx.decodeAudioData(e,r,o)},l=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},c=function(){if(t.usingWebAudio){try{"undefined"!=typeof AudioContext?t.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch(e){t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),n=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),o=n?parseInt(n[1],10):null;if(e&&o&&o<9){var r=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!r&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=void 0===t.ctx.createGain?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};"function"==typeof define&&define.amd&&define([],(function(){return{Howler:t,Howl:o}})),t,T=o,void 0!==n?(n.HowlerGlobal=e,n.Howler=t,n.Howl=o,n.Sound=r):"undefined"!=typeof window&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=o,window.Sound=r)}(),
/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
function(){var e;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){var t=this;if(!t.ctx||!t.ctx.listener)return t;for(var n=t._howls.length-1;n>=0;n--)t._howls[n].stereo(e);return t},HowlerGlobal.prototype.pos=function(e,t,n){var o=this;return o.ctx&&o.ctx.listener?(t="number"!=typeof t?o._pos[1]:t,n="number"!=typeof n?o._pos[2]:n,"number"!=typeof e?o._pos:(o._pos=[e,t,n],void 0!==o.ctx.listener.positionX?(o.ctx.listener.positionX.setTargetAtTime(o._pos[0],Howler.ctx.currentTime,.1),o.ctx.listener.positionY.setTargetAtTime(o._pos[1],Howler.ctx.currentTime,.1),o.ctx.listener.positionZ.setTargetAtTime(o._pos[2],Howler.ctx.currentTime,.1)):o.ctx.listener.setPosition(o._pos[0],o._pos[1],o._pos[2]),o)):o},HowlerGlobal.prototype.orientation=function(e,t,n,o,r,i){var a=this;if(!a.ctx||!a.ctx.listener)return a;var s=a._orientation;return t="number"!=typeof t?s[1]:t,n="number"!=typeof n?s[2]:n,o="number"!=typeof o?s[3]:o,r="number"!=typeof r?s[4]:r,i="number"!=typeof i?s[5]:i,"number"!=typeof e?s:(a._orientation=[e,t,n,o,r,i],void 0!==a.ctx.listener.forwardX?(a.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),a.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),a.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),a.ctx.listener.upX.setTargetAtTime(o,Howler.ctx.currentTime,.1),a.ctx.listener.upY.setTargetAtTime(r,Howler.ctx.currentTime,.1),a.ctx.listener.upZ.setTargetAtTime(i,Howler.ctx.currentTime,.1)):a.ctx.listener.setOrientation(e,t,n,o,r,i),a)},Howl.prototype.init=(e=Howl.prototype.init,function(t){var n=this;return n._orientation=t.orientation||[1,0,0],n._stereo=t.stereo||null,n._pos=t.pos||null,n._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},n._onstereo=t.onstereo?[{fn:t.onstereo}]:[],n._onpos=t.onpos?[{fn:t.onpos}]:[],n._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}),Howl.prototype.stereo=function(e,n){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"stereo",action:function(){o.stereo(e,n)}}),o;var r=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===n){if("number"!=typeof e)return o._stereo;o._stereo=e,o._pos=[e,0,0]}for(var i=o._getSoundIds(n),a=0;a<i.length;a++){var s=o._soundById(i[a]);if(s){if("number"!=typeof e)return s._stereo;s._stereo=e,s._pos=[e,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",s._panner&&s._panner.pan||t(s,r),"spatial"===r?void 0!==s._panner.positionX?(s._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):s._panner.setPosition(e,0,0):s._panner.pan.setValueAtTime(e,Howler.ctx.currentTime)),o._emit("stereo",s._id)}}return o},Howl.prototype.pos=function(e,n,o,r){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"pos",action:function(){i.pos(e,n,o,r)}}),i;if(n="number"!=typeof n?0:n,o="number"!=typeof o?-.5:o,void 0===r){if("number"!=typeof e)return i._pos;i._pos=[e,n,o]}for(var a=i._getSoundIds(r),s=0;s<a.length;s++){var d=i._soundById(a[s]);if(d){if("number"!=typeof e)return d._pos;d._pos=[e,n,o],d._node&&(d._panner&&!d._panner.pan||t(d,"spatial"),void 0!==d._panner.positionX?(d._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),d._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),d._panner.positionZ.setValueAtTime(o,Howler.ctx.currentTime)):d._panner.setPosition(e,n,o)),i._emit("pos",d._id)}}return i},Howl.prototype.orientation=function(e,n,o,r){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"orientation",action:function(){i.orientation(e,n,o,r)}}),i;if(n="number"!=typeof n?i._orientation[1]:n,o="number"!=typeof o?i._orientation[2]:o,void 0===r){if("number"!=typeof e)return i._orientation;i._orientation=[e,n,o]}for(var a=i._getSoundIds(r),s=0;s<a.length;s++){var d=i._soundById(a[s]);if(d){if("number"!=typeof e)return d._orientation;d._orientation=[e,n,o],d._node&&(d._panner||(d._pos||(d._pos=i._pos||[0,0,-.5]),t(d,"spatial")),void 0!==d._panner.orientationX?(d._panner.orientationX.setValueAtTime(e,Howler.ctx.currentTime),d._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),d._panner.orientationZ.setValueAtTime(o,Howler.ctx.currentTime)):d._panner.setOrientation(e,n,o)),i._emit("orientation",d._id)}}return i},Howl.prototype.pannerAttr=function(){var e,n,o,r=this,i=arguments;if(!r._webAudio)return r;if(0===i.length)return r._pannerAttr;if(1===i.length){if("object"!=typeof i[0])return(o=r._soundById(parseInt(i[0],10)))?o._pannerAttr:r._pannerAttr;e=i[0],void 0===n&&(e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}),r._pannerAttr={coneInnerAngle:void 0!==e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:void 0!==e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:void 0!==e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:void 0!==e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:r._distanceModel,maxDistance:void 0!==e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:r._maxDistance,refDistance:void 0!==e.pannerAttr.refDistance?e.pannerAttr.refDistance:r._refDistance,rolloffFactor:void 0!==e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:void 0!==e.pannerAttr.panningModel?e.pannerAttr.panningModel:r._panningModel})}else 2===i.length&&(e=i[0],n=parseInt(i[1],10));for(var a=r._getSoundIds(n),s=0;s<a.length;s++)if(o=r._soundById(a[s])){var d=o._pannerAttr;d={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:d.coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:d.coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:d.coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:d.distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:d.maxDistance,refDistance:void 0!==e.refDistance?e.refDistance:d.refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:d.rolloffFactor,panningModel:void 0!==e.panningModel?e.panningModel:d.panningModel};var l=o._panner;l?(l.coneInnerAngle=d.coneInnerAngle,l.coneOuterAngle=d.coneOuterAngle,l.coneOuterGain=d.coneOuterGain,l.distanceModel=d.distanceModel,l.maxDistance=d.maxDistance,l.refDistance=d.refDistance,l.rolloffFactor=d.rolloffFactor,l.panningModel=d.panningModel):(o._pos||(o._pos=r._pos||[0,0,-.5]),t(o,"spatial"))}return r},Sound.prototype.init=function(e){return function(){var t=this,n=t._parent;t._orientation=n._orientation,t._stereo=n._stereo,t._pos=n._pos,t._pannerAttr=n._pannerAttr,e.call(this),t._stereo?n.stereo(t._stereo):t._pos&&n.pos(t._pos[0],t._pos[1],t._pos[2],t._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this,n=t._parent;return t._orientation=n._orientation,t._stereo=n._stereo,t._pos=n._pos,t._pannerAttr=n._pannerAttr,t._stereo?n.stereo(t._stereo):t._pos?n.pos(t._pos[0],t._pos[1],t._pos[2],t._id):t._panner&&(t._panner.disconnect(0),t._panner=void 0,n._refreshBuffer(t)),e.call(this)}}(Sound.prototype.reset);var t=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}();var S;S=new URL(i("27Lyk").resolve("irUyb"),import.meta.url).toString();var k;k=new URL(i("27Lyk").resolve("cVuQj"),import.meta.url).toString();var P;P=new URL(i("27Lyk").resolve("eZkMa"),import.meta.url).toString();var $;$=new URL(i("27Lyk").resolve("fhciA"),import.meta.url).toString();var O;O=new URL(i("27Lyk").resolve("hlDNR"),import.meta.url).toString();var L;L=new URL(i("27Lyk").resolve("dcee0"),import.meta.url).toString();var I;I=new URL(i("27Lyk").resolve("eYHbW"),import.meta.url).toString();var H,E;H=new URL(i("27Lyk").resolve("iKhnu"),import.meta.url).toString();class G{sounds={};constructor(){this.sounds.music=this.loadSound(t(S),.5,!0),this.sounds.rotate=this.loadSound(t(P),.4),this.sounds.move=this.loadSound(t($),.3),this.sounds.lock=this.loadSound(t(O),.3),this.sounds.hardDrop=this.loadSound(t(L),.75),this.sounds.gameOver=this.loadSound(t(I),.75),this.sounds.lineClear=this.loadSound(t(H),1)}loadSound(e,t,n=!1){return new T({src:[e],volume:t,loop:n})}play(e){this.sounds[e].play()}pause(e){this.sounds[e].pause()}resume(e){this.sounds[e].play()}stop(e){this.sounds[e].stop()}setVolume(e,t){this.sounds[e].volume(t)}setMusic(e){switch(e){case"a":this.sounds.music=this.loadSound(t(S),.5,!0);break;case"b":this.sounds.music=this.loadSound(t(k),.5,!0);break;default:this.setVolume("music",0)}}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const C=window,M=C.trustedTypes,R=M?M.createPolicy("lit-html",{createHTML:e=>e}):void 0,D=`lit$${(Math.random()+"").slice(9)}$`,B="?"+D,F=`<${B}>`,N=document,V=(e="")=>N.createComment(e),W=e=>null===e||"object"!=typeof e&&"function"!=typeof e,U=Array.isArray,j=e=>U(e)||"function"==typeof(null==e?void 0:e[Symbol.iterator]),q=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,X=/-->/g,Y=/>/g,Z=RegExp(">|[ \t\n\f\r](?:([^\\s\"'>=/]+)([ \t\n\f\r]*=[ \t\n\f\r]*(?:[^ \t\n\f\r\"'`<>=]|(\"|')|))|$)","g"),Q=/'/g,K=/"/g,J=/^(?:script|style|textarea|title)$/i,z=e=>(t,...n)=>({_$litType$:e,strings:t,values:n}),ee=z(1),te=(z(2),Symbol.for("lit-noChange")),ne=Symbol.for("lit-nothing"),oe=new WeakMap,re=N.createTreeWalker(N,129,null,!1),ie=(e,t)=>{const n=e.length-1,o=[];let r,i=2===t?"<svg>":"",a=q;for(let t=0;t<n;t++){const n=e[t];let s,d,l=-1,c=0;for(;c<n.length&&(a.lastIndex=c,d=a.exec(n),null!==d);)c=a.lastIndex,a===q?"!--"===d[1]?a=X:void 0!==d[1]?a=Y:void 0!==d[2]?(J.test(d[2])&&(r=RegExp("</"+d[2],"g")),a=Z):void 0!==d[3]&&(a=Z):a===Z?">"===d[0]?(a=null!=r?r:q,l=-1):void 0===d[1]?l=-2:(l=a.lastIndex-d[2].length,s=d[1],a=void 0===d[3]?Z:'"'===d[3]?K:Q):a===K||a===Q?a=Z:a===X||a===Y?a=q:(a=Z,r=void 0);const u=a===Z&&e[t+1].startsWith("/>")?" ":"";i+=a===q?n+F:l>=0?(o.push(s),n.slice(0,l)+"$lit$"+n.slice(l)+D+u):n+D+(-2===l?(o.push(void 0),t):u)}const s=i+(e[n]||"<?>")+(2===t?"</svg>":"");if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==R?R.createHTML(s):s,o]};class ae{constructor({strings:e,_$litType$:t},n){let o;this.parts=[];let r=0,i=0;const a=e.length-1,s=this.parts,[d,l]=ie(e,t);if(this.el=ae.createElement(d,n),re.currentNode=this.el.content,2===t){const e=this.el.content,t=e.firstChild;t.remove(),e.append(...t.childNodes)}for(;null!==(o=re.nextNode())&&s.length<a;){if(1===o.nodeType){if(o.hasAttributes()){const e=[];for(const t of o.getAttributeNames())if(t.endsWith("$lit$")||t.startsWith(D)){const n=l[i++];if(e.push(t),void 0!==n){const e=o.getAttribute(n.toLowerCase()+"$lit$").split(D),t=/([.?@])?(.*)/.exec(n);s.push({type:1,index:r,name:t[2],strings:e,ctor:"."===t[1]?ue:"?"===t[1]?_e:"@"===t[1]?fe:ce})}else s.push({type:6,index:r})}for(const t of e)o.removeAttribute(t)}if(J.test(o.tagName)){const e=o.textContent.split(D),t=e.length-1;if(t>0){o.textContent=M?M.emptyScript:"";for(let n=0;n<t;n++)o.append(e[n],V()),re.nextNode(),s.push({type:2,index:++r});o.append(e[t],V())}}}else if(8===o.nodeType)if(o.data===B)s.push({type:2,index:r});else{let e=-1;for(;-1!==(e=o.data.indexOf(D,e+1));)s.push({type:7,index:r}),e+=D.length-1}r++}}static createElement(e,t){const n=N.createElement("template");return n.innerHTML=e,n}}function se(e,t,n=e,o){var r,i,a,s;if(t===te)return t;let d=void 0!==o?null===(r=n._$Co)||void 0===r?void 0:r[o]:n._$Cl;const l=W(t)?void 0:t._$litDirective$;return(null==d?void 0:d.constructor)!==l&&(null===(i=null==d?void 0:d._$AO)||void 0===i||i.call(d,!1),void 0===l?d=void 0:(d=new l(e),d._$AT(e,n,o)),void 0!==o?(null!==(a=(s=n)._$Co)&&void 0!==a?a:s._$Co=[])[o]=d:n._$Cl=d),void 0!==d&&(t=se(e,d._$AS(e,t.values),d,o)),t}class de{constructor(e,t){this.u=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(e){var t;const{el:{content:n},parts:o}=this._$AD,r=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:N).importNode(n,!0);re.currentNode=r;let i=re.nextNode(),a=0,s=0,d=o[0];for(;void 0!==d;){if(a===d.index){let t;2===d.type?t=new le(i,i.nextSibling,this,e):1===d.type?t=new d.ctor(i,d.name,d.strings,this,e):6===d.type&&(t=new he(i,this,e)),this.u.push(t),d=o[++s]}a!==(null==d?void 0:d.index)&&(i=re.nextNode(),a++)}return r}p(e){let t=0;for(const n of this.u)void 0!==n&&(void 0!==n.strings?(n._$AI(e,n,t),t+=n.strings.length-2):n._$AI(e[t])),t++}}class le{constructor(e,t,n,o){var r;this.type=2,this._$AH=ne,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=n,this.options=o,this._$Cm=null===(r=null==o?void 0:o.isConnected)||void 0===r||r}get _$AU(){var e,t;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$Cm}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===e.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=se(this,e,t),W(e)?e===ne||null==e||""===e?(this._$AH!==ne&&this._$AR(),this._$AH=ne):e!==this._$AH&&e!==te&&this.g(e):void 0!==e._$litType$?this.$(e):void 0!==e.nodeType?this.T(e):j(e)?this.k(e):this.g(e)}O(e,t=this._$AB){return this._$AA.parentNode.insertBefore(e,t)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}g(e){this._$AH!==ne&&W(this._$AH)?this._$AA.nextSibling.data=e:this.T(N.createTextNode(e)),this._$AH=e}$(e){var t;const{values:n,_$litType$:o}=e,r="number"==typeof o?this._$AC(e):(void 0===o.el&&(o.el=ae.createElement(o.h,this.options)),o);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===r)this._$AH.p(n);else{const e=new de(r,this),t=e.v(this.options);e.p(n),this.T(t),this._$AH=e}}_$AC(e){let t=oe.get(e.strings);return void 0===t&&oe.set(e.strings,t=new ae(e)),t}k(e){U(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let n,o=0;for(const r of e)o===t.length?t.push(n=new le(this.O(V()),this.O(V()),this,this.options)):n=t[o],n._$AI(r),o++;o<t.length&&(this._$AR(n&&n._$AB.nextSibling,o),t.length=o)}_$AR(e=this._$AA.nextSibling,t){var n;for(null===(n=this._$AP)||void 0===n||n.call(this,!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){var t;void 0===this._$AM&&(this._$Cm=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}}class ce{constructor(e,t,n,o,r){this.type=1,this._$AH=ne,this._$AN=void 0,this.element=e,this.name=t,this._$AM=o,this.options=r,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=ne}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,n,o){const r=this.strings;let i=!1;if(void 0===r)e=se(this,e,t,0),i=!W(e)||e!==this._$AH&&e!==te,i&&(this._$AH=e);else{const o=e;let a,s;for(e=r[0],a=0;a<r.length-1;a++)s=se(this,o[n+a],t,a),s===te&&(s=this._$AH[a]),i||(i=!W(s)||s!==this._$AH[a]),s===ne?e=ne:e!==ne&&(e+=(null!=s?s:"")+r[a+1]),this._$AH[a]=s}i&&!o&&this.j(e)}j(e){e===ne?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}}class ue extends ce{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===ne?void 0:e}}const pe=M?M.emptyScript:"";class _e extends ce{constructor(){super(...arguments),this.type=4}j(e){e&&e!==ne?this.element.setAttribute(this.name,pe):this.element.removeAttribute(this.name)}}class fe extends ce{constructor(e,t,n,o,r){super(e,t,n,o,r),this.type=5}_$AI(e,t=this){var n;if((e=null!==(n=se(this,e,t,0))&&void 0!==n?n:ne)===te)return;const o=this._$AH,r=e===ne&&o!==ne||e.capture!==o.capture||e.once!==o.once||e.passive!==o.passive,i=e!==ne&&(o===ne||r);r&&this.element.removeEventListener(this.name,this,o),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,n;"function"==typeof this._$AH?this._$AH.call(null!==(n=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==n?n:this.element,e):this._$AH.handleEvent(e)}}class he{constructor(e,t,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){se(this,e)}}const me=C.litHtmlPolyfillSupport;null==me||me(ae,le),(null!==(E=C.litHtmlVersions)&&void 0!==E?E:C.litHtmlVersions=[]).push("2.5.0");const ve=(e,t,n)=>{var o,r;const i=null!==(o=null==n?void 0:n.renderBefore)&&void 0!==o?o:t;let a=i._$litPart$;if(void 0===a){const e=null!==(r=null==n?void 0:n.renderBefore)&&void 0!==r?r:null;i._$litPart$=a=new le(t.insertBefore(V(),e),e,void 0,null!=n?n:{})}return a._$AI(e),a},ge=Array.from(Array(10).keys()),ye=()=>ee`<div class="p-[2px] border-2 border-slate-100 rounded bg-gray-900">
        <div class="border-2 border-slate-100 rounded-sm">
            <div class="text-center uppercase font-bold tracking-wide pt-1">Controls</div>
            <div class="p-2">
                <div class="flex justify-between">
                    <span>&#8592; &#8594; &#8595;</span>
                    <span>Move</span>
                </div>
                <div class="flex justify-between">
                    <span>&#8593;</span>
                    <span class="flex">Hard<span class="w-1"></span>Drop</span>
                </div>
                <div class="flex justify-between">
                    <span class="flex">D<span class="w-2"></span>S</span>
                    <span>Rotate</span>
                </div>
                <div class="flex justify-between">
                    <span>Enter</span>
                    <span>Pause</span>
                </div>
            </div>
        </div>
    </div> `,be=e=>ee`<button
        type="button"
        @click=${e.action}
        class="w-full 
            uppercase 
            tracking-wider 
            py-3 
            px-6 
            bg-gradient-to-l 
            from-gray-600
            to-transparent
            hover:bg-gray-600 
            border-t-2 
            border-b-2 
            border-slate-100 
            text-slate-100 
            font-bold 
            transition 
            duration-200 
            ease-in-out"
    >
        ${e.text}
    </button>`;class Ae{nextPieceElementId="nextPiece";scoreElementId="gameScore";gameOptionsId="gameOptions";overlayId="gameOverlay";overlayElement=null;constructor(){this.nextPieceElement=document.getElementById(this.nextPieceElementId),this.scoreElement=document.getElementById(this.scoreElementId)}gameLayout(e){const t=document.getElementById(e);ve(ee`<div class="game-layout text-slate-100 bg-gray-800 h-screen flex text-lg">
        <div class="flex gap-4 justify-around m-auto pb-12">
            <div class="p-[2px] border-2 border-slate-100 rounded bg-gray-900 relative ml-auto">
                <div class="h-[664px] w-[334px] border-2 border-slate-100 rounded-sm">
                    <canvas id="board" class="board"></canvas>
                    <div id="gameOptions"></div>
                    <div id="gameOverlay"></div>
                </div>
            </div>
            <div class="mr-auto w-[220px] flex flex-col">
                <div id="gameScore"></div>
                <div id="nextPiece"></div>
                <div class="mt-auto">${ye()}</div>
            </div>
        </div>
    </div>`,t)}newGame(e){const t=document.getElementById(this.gameOptionsId);var n;ve(ee`<div
        class="absolute top-1 right-1 bottom-1 left-1 bg-gray-900 items-center justify-center flex-col ${(n=e).hide?"hidden":"flex"}"
    >
        <div class="mb-12 font-bold tracking-wide text-[44px] flex font-outline">
            <span class="text-blue-400 font-outline-blue">T</span>
            <span class="text-green-400 font-outline-green">Y</span>
            <span class="text-red-400 font-outline-red">P</span>
            <span class="text-orange-400 font-outline-orange">E</span>
            <span class="text-yellow-300 font-outline-yellow">T</span>
            <span class="text-green-400 font-outline-green">R</span>
            <span class="text-cyan-300 font-outline-cyan">I</span>
            <span class="text-purple-400 font-outline-purple">S</span>
        </div>

        <div class="uppercase font-bold tracking-wide mb-3">Speed Level</div>
        <div class="flex flex-wrap justify-center mx-6 border-l-2 border-t-2 border-slate-100 mb-8">
            ${ge.map((e=>ee`<div
                    class="grow
                            border-r-2 
                            border-b-2
                            border-slate-100
                            text-slate-100
                            flex
                            text-xl
                            font-bold"
                >
                    <button
                        type="button"
                        game-option-btn="level"
                        value="${e}"
                        @click=${n.selectGameOption}
                        class="grow 
                        px-4 
                        py-2
                        
                        hover:opacity-100 
                        transition 
                        duration-150 
                        ease-in-out
                        ${0===e?"opacity-100 selected":"opacity-25"}"
                    >
                        ${e}
                    </button>
                </div>`))}
        </div>

        <div class="uppercase font-bold tracking-wide mb-3">Music Type</div>
        <div class="w-full px-5">
            <div class="w-full flex justify-center border-l-2 border-t-2 border-slate-100 mb-16">
                <div
                    class="grow
                        border-r-2 
                        border-b-2
                        border-slate-100
                        text-slate-100
                        flex
                        flex-1
                        font-bold"
                >
                    <button
                        type="button"
                        game-option-btn="music"
                        value="a"
                        @click=${n.selectGameOption}
                        class="grow 
                            px-2 
                            py-2
                            hover:opacity-100 
                            transition 
                            duration-150 
                            ease-in-out
                            opacity-100 selected"
                    >
                        A-Type
                    </button>
                </div>
                <div
                    class="grow
                        border-r-2 
                        border-b-2
                        border-slate-100
                        text-slate-100
                        flex
                        flex-1
                        font-bold"
                >
                    <button
                        type="button"
                        game-option-btn="music"
                        value="b"
                        @click=${n.selectGameOption}
                        class="grow 
                            px-2 
                            py-2
                            hover:opacity-100 
                            transition 
                            duration-150 
                            ease-in-out
                            opacity-25"
                    >
                        B-Type
                    </button>
                </div>
                <div
                    class="grow
                        border-r-2 
                        border-b-2
                        border-slate-100
                        text-slate-100
                        flex
                        flex-1
                        font-bold"
                >
                    <button
                        type="button"
                        game-option-btn="music"
                        value="off"
                        @click=${n.selectGameOption}
                        class="grow 
                            px-2 
                            py-2 
                            hover:opacity-100 
                            transition 
                            duration-150 
                            ease-in-out
                            opacity-25"
                    >
                        Off
                    </button>
                </div>
            </div>
        </div>

        ${be({text:"Ready",action:n.startGame})}
    </div>`,t)}pause(e){const t=this.getOverlayElement();var n;ve(ee`<div
        class="game-overlay absolute top-[4px] right-[4px] bottom-[4px] left-[4px] bg-gray-900 items-center justify-center flex-col ${(n=e).hide?"hidden":"flex"}"
    >
        <div class="mb-12 font-bold tracking-wide text-[40px] flex font-outline">
            <span class="text-red-400 font-outline-red">P</span>
            <span class="text-orange-400 font-outline-orange">A</span>
            <span class="text-yellow-300 font-outline-yellow">U</span>
            <span class="text-green-400 font-outline-green">S</span>
            <span class="text-cyan-300 font-outline-cyan">E</span>
            <span class="text-purple-400 font-outline-purple">D</span>
        </div>
        <div class="mb-8 w-full">
            ${be({text:"Resume",action:n.resumeAction})}
        </div>
        ${be({text:"Start new game",action:n.newGameAction})}
    </div>`,t)}gameOver(e){const t=this.getOverlayElement();var n;ve(ee`<div
        class="game-overlay absolute top-[4px] right-[4px] bottom-[4px] left-[4px] bg-gray-900 items-center justify-center flex-col ${(n=e).hide?"hidden":"flex"}"
    >
        <div class="mb-12 font-bold tracking-wide text-[40px] flex font-outline">
            <span class="text-blue-400 font-outline-blue">G</span>
            <span class="text-green-400 font-outline-green">A</span>
            <span class="text-red-400 font-outline-red">M</span>
            <span class="text-orange-400 font-outline-orange">E</span>
            <span class="w-2"></span>
            <span class="text-yellow-300 font-outline-yellow">O</span>
            <span class="text-green-400 font-outline-green">V</span>
            <span class="text-cyan-300 font-outline-cyan">E</span>
            <span class="text-purple-400 font-outline-purple">R</span>
        </div>
        ${be({text:"Start new game",action:n.action})}
    </div>`,t)}nextPiece(){ve(ee`<div class="p-[2px] border-2 border-slate-100 rounded bg-gray-900 mb-3">
        <div class="border-2 border-slate-100 rounded-sm">
            <div class="text-center uppercase font-bold tracking-wide pt-1">Next</div>
            <div class="next-piece-container h-[140px] w-[140px] mx-auto mb-3 flex items-center justify-center">
                <canvas id="nextPieceBoard" class="next-piece-canvas"></canvas>
            </div>
        </div>
    </div>`,this.nextPieceElement)}score(e){const{score:t,clearedLines:n,level:o}=e;var r;ve(ee`<div class="p-[2px] border-2 border-slate-100 rounded bg-gray-900 mb-3">
            <div class="border-2 border-slate-100 rounded-sm text-center font-bold tracking-wide py-1">
                <div class="uppercase">Score</div>
                <div class="text-xl">${(r={score:t,clearedLines:n,level:o}).score}</div>
            </div>
        </div>
        <div class="p-[2px] border-2 border-slate-100 rounded bg-gray-900 mb-3">
            <div class="border-2 border-slate-100 rounded-sm text-center font-bold tracking-wide py-1">
                <div class="uppercase">Lines</div>
                <div class="text-xl">${r.clearedLines}</div>
            </div>
        </div>
        <div class="p-[2px] border-2 border-slate-100 rounded bg-gray-900 mb-3">
            <div class="border-2 border-slate-100 rounded-sm text-center font-bold tracking-wide py-1">
                <div class="uppercase">Speed LV</div>
                <div class="text-xl">${r.level}</div>
            </div>
        </div>`,this.scoreElement)}getOverlayElement(){return this.overlayElement||(this.overlayElement=document.getElementById(this.overlayId)),this.overlayElement}}class xe{canvasId="nextPieceBoard";constructor(){this.display=new Ae,this.display.nextPiece(),this.canvas=document.getElementById(this.canvasId),this.context=this.canvas.getContext("2d")}draw(e){const t=e.shapes[0];this.setCanvasDimensions(t);for(let n=0;n<t.length;n++)for(let o=0;o<t[0].length;o++)0!==t[n][o]&&A.drawMino(o,n,this.context,e.color)}clear(){this.context.clearRect(0,0,this.context.canvas.width,this.context.canvas.height)}setCanvasDimensions(e){const t=2===e.length?2:e.length-1;this.context.canvas.width=33*e.length,this.context.canvas.height=33*t,this.context.scale(33,33)}}class we{score=0;level=0;isRunning=!1;isPaused=!1;isGameOver=!1;totalLinesCleared=0;dropScore=0;newLinesCleared=0;constructor(e){this.game=e,this.display=new Ae,this.speed=u[this.level],this.renderScoreTemplate()}renderScoreTemplate(){this.display.score({score:this.score.toString().padStart(6,"0"),clearedLines:this.totalLinesCleared.toString().padStart(3,"0"),level:this.level.toString().padStart(2,"0")})}reset(){this.totalLinesCleared=0,this.dropScore=0,this.score=0,this.speed=u[this.level],this.isPaused=!1,this.isGameOver=!1,this.updateScore()}incrementDropScore(e=1,t=!1){this.dropScore=t?this.dropScore+2*e:this.dropScore+1*e}updateScore(){this.newLinesCleared&&(this.score=this.score+l[this.newLinesCleared-1]*(this.level+1),this.totalLinesCleared=this.totalLinesCleared+this.newLinesCleared),this.dropScore&&(this.score=this.score+1*this.dropScore),this.newLinesCleared=0,this.dropScore=0,this.renderScoreTemplate()}setGameOptions(e){const{level:t}=e;this.setLevel(t)}setLevel(e){this.level=e,this.speed=u[this.level],this.renderScoreTemplate()}checkLevelChange(){this.totalLinesCleared>10*(this.level+1)&&this.level<20&&this.setLevel(this.level+1)}togglePause(){this.isPaused=!this.isPaused}}class Te{isHardDropActive=!1;constructor(e,t){this.game=e,this.state=t}attachEventHandlers(){document.addEventListener("keydown",(e=>{if(this.state.isRunning&&(e.key===d.PAUSE&&this.game.handleClickPause(),!this.game.lineClearActive&&!this.state.isPaused))switch(e.key){case d.HARD_DROP:if(this.isHardDropActive)return;this.isHardDropActive=!0,this.game.hardDrop();break;case d.DOWN:this.game.movePiece({direction:s.DOWN,userInput:!0});break;case d.LEFT:this.game.movePiece({direction:s.LEFT,userInput:!0});break;case d.RIGHT:this.game.movePiece({direction:s.RIGHT,userInput:!0});break;case d.ROTATE_CLOCKWISE:this.game.rotatePiece("clockwise");break;case d.ROTATE_COUNTER_CLOCKWISE:this.game.rotatePiece("counterClockwise")}})),document.addEventListener("keyup",(e=>{if(e.key===d.HARD_DROP)this.isHardDropActive=!1}))}}new class{boardId="board";gameOptionAttr="game-option-btn";gameTimer={start:0,elapsed:0};lineClearActive=!1;constructor(e){this.display=new Ae,this.display.gameLayout(e),this.renderNewGameTemplate(),this.audioPlayer=new G,this.state=new we(this),this.board=new x(this.boardId),this.nextPieceBoard=new xe,this.piece=this.getRandomPiece(),this.nextPiece=this.getRandomPiece(),this.inputs=new Te(this,this.state),this.inputs.attachEventHandlers()}renderNewGameTemplate(e=!1){this.display.newGame({hide:e,startGame:this.startGame.bind(this),selectGameOption:this.selectGameOption.bind(this)})}renderGameOverTemplate(e=!1){this.display.gameOver({hide:e,action:this.restartGame.bind(this)})}renderPauseTemplate(e=!1){this.display.pause({hide:e,resumeAction:this.handleClickPause.bind(this),newGameAction:this.restartGame.bind(this)})}startGame(){this.setGameOptions(),this.renderNewGameTemplate(!0),this.movePiece({direction:s.NO_CHANGE}),this.nextPieceBoard.draw(this.nextPiece),this.startGameLoop(),this.state.isRunning=!0,this.audioPlayer.play("music")}restartGame(){this.stopGameLoop(),this.audioPlayer.stop("music"),this.state.reset(),this.nextPieceBoard.clear(),this.board=new x(this.boardId),this.piece=this.getRandomPiece(),this.nextPiece=this.getRandomPiece(),this.renderPauseTemplate(!0),this.renderGameOverTemplate(!0),this.renderNewGameTemplate()}async startGameLoop(e=0){this.gameTimer.elapsed=e-this.gameTimer.start,this.lineClearActive||this.gameTimer.elapsed>this.state.speed&&(this.gameTimer.start=e,this.piece.isLocked?(this.audioPlayer.play("lock"),await this.handleLockedPiece()):this.movePiece({direction:s.DOWN}),this.state.isGameOver)||(this.requestId=requestAnimationFrame(this.startGameLoop.bind(this)))}stopGameLoop(){cancelAnimationFrame(this.requestId)}movePiece(e){const{direction:t,initialDrop:n,userInput:o}=e;this.piece.isMoveValid({direction:t})?(!o||t!==s.LEFT&&t!==s.RIGHT||this.audioPlayer.play("move"),this.piece.move(t),o&&t===s.DOWN&&(this.state.incrementDropScore(),this.piece.isLocked&&(this.audioPlayer.play("lock"),this.handleLockedPiece())),this.board.draw()):n&&this.gameOver()}rotatePiece(e){this.piece.isMoveValid({rotation:e})&&(this.audioPlayer.play("rotate"),this.piece.rotate(e),this.board.draw())}hardDrop(){if(this.piece.isLocked)return;const e=this.piece.hardDrop();this.state.incrementDropScore(e,!0),this.audioPlayer.play("hardDrop"),this.board.draw(),this.piece.isLocked&&this.handleLockedPiece()}async handleLockedPiece(){this.lineClearActive=!0,this.stopGameLoop(),await this.checkLinesClear(),this.state.updateScore(),this.state.checkLevelChange(),this.piece=this.nextPiece,this.nextPiece=this.getRandomPiece(),this.nextPieceBoard.draw(this.nextPiece),this.movePiece({direction:s.NO_CHANGE,initialDrop:!0}),this.lineClearActive=!1,this.startGameLoop()}async checkLinesClear(){const e=this.board.getLinesCleared();e.length&&(this.audioPlayer.play("lineClear"),await this.board.handleClearLines(e),this.state.newLinesCleared=e.length)}getRandomPiece(){let e=this.getRandomTetromino();return this.piece&&e.id===this.piece.id&&(e=this.getRandomTetromino()),new w(e,this.board)}getRandomTetromino(){const e=Math.floor(Math.random()*b.length);return JSON.parse(JSON.stringify(b[e]))}handleClickPause(){this.state.togglePause(),this.state.isPaused?(this.stopGameLoop(),this.renderPauseTemplate(),this.audioPlayer.pause("music")):(this.startGameLoop(),this.renderPauseTemplate(!0),this.audioPlayer.resume("music"))}async gameOver(){this.state.isGameOver=!0,this.state.isRunning=!1,this.audioPlayer.stop("music"),this.audioPlayer.play("gameOver"),this.nextPieceBoard.clear(),await this.board.handleGameOver(),this.renderGameOverTemplate()}setGameOptions(){const e=document.querySelector(`[${this.gameOptionAttr}="music"].selected`)?.value,t=document.querySelector(`[${this.gameOptionAttr}="level"].selected`)?.value;this.audioPlayer.setMusic(e),this.state.setGameOptions({level:parseInt(t,10)})}selectGameOption(e){const t=e.target,n=t.getAttribute(this.gameOptionAttr);document.querySelectorAll(`[game-option-btn="${n}"]`).forEach((e=>{e.classList.remove("selected","opacity-100"),e.classList.add("opacity-25")})),t&&(t.classList.add("selected","opacity-100"),t.classList.remove("opacity-25"))}}("tetris");
//# sourceMappingURL=index.a78dea10.js.map
